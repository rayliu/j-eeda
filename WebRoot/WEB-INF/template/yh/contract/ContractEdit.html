<%layout("/yh/layout.html"){%>
 

 <div id="page-wrapper">
    
    <div class="row">
        <div class="col-lg-12 panel-body">
            <% if(saveOK!''==true){%>
            <div class="alert alert-success alert-dismissable">
                <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
                保存成功。
            </div>
            <%}%>
            <h1 class="page-header">创建新客户合同</h1>
           
        </div>
        <!-- /.col-lg-12 -->
    </div>

    <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            客户合同基本信息
                        </div>
                        <div class="panel-body">
                            <div class="row">
                                <form id="customerForm" role="form" action="/yh/customer/save" method="post">
                                    <input id="partyId" name="party_id" type="hidden" value="${party.id!''}">
                                    <!-- /.col-lg-6 (odd) 奇数列 -->
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">

                                                <label>合同名称(必填)</label>
                                                <input class="form-control" id="company_name" name="company_name" type="text" value="${company_name!''}">
                                            </div>                                     
                                        </fieldset>
                                    </div>

                                    <!-- /.col-lg-6 (odd) 奇数列 -->
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
												<label>客户公司名称(选择客户后，自动填写其他信息)</label>
                                                <input class="form-control" id="company_name" name="company_name" type="text" value="${company_name!''}">
                                                <ul id='customerList' tabindex="-1" class="pull-right dropdown-menu default" style="top: 50%; left: 5%;">
												</ul>
                                            </div>                                     
                                        </fieldset>
                                    </div>

                                    <!-- /.col-lg-6 (even) 偶数列-->                                    
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>联系人(必填)</label>
                                                <input class="form-control" id="name" type="text" name="name" value="${name!''}">
                                            </div>
                                        </fieldset>
                                    </div>

                                    <!-- /.col-lg-6 (odd) 奇数列 -->
                                     <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>联系地址</label>
                                                <input class="form-control" id="address" type="text" name="address" value="${address!''}">
                                            </div>                                     
                                        </fieldset>
                                    </div>                                    
                                    
                                    <!-- /.col-lg-6 (even) 偶数列 -->
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>联系人电话</label>
                                                <input class="form-control" id="disabledInput" type="text" name="phone" value="${phone!''}">
                                            </div>
                                        </fieldset>
                                    </div>
                                    
                                    <!-- /.col-lg-6 (odd) 奇数列 -->
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>email</label>
                                                <input class="form-control" id="email" type="text" name="email" value="${email!''}">
                                            </div>                                     
                                        </fieldset>
                                    </div>

                                    <!-- /.col-lg-6 (even) 偶数列 -->
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                                <label>邮政编码</label>
                                                <input class="form-control" id="post_code" type="text" name="post_code" value="${post_code!''}">
                                            </div>
                                        </fieldset>
                                    </div>

                                    <!-- /.col-lg-6 (even) 偶数列 -->
                                    <div class="col-lg-6">
                                        <fieldset>
                                            <div class="form-group">
                                               
                                            </div>
                                        </fieldset>
                                    </div>

                                    <!-- /.col-lg-6 (odd) 奇数列 -->
                                    <div class="col-lg-6">
                                        <button type="submit" class="btn btn-default">保存</button>
                                        <a class="btn btn-default" href="/yh/customerContract">返回列表</a>
                                    </div>

                                    
                                   
                                </form role="form">

                            </div>
                            <!-- /.row (nested) -->

                            
                            <div class="col-lg-12">
                    			<h1 class="page-header">
                        		<button class="btn btn-primary" id="btn">新增合同干线</button>
                    			</h1>
                			</div>
                			
                            	<div class="panel-heading">
                            		<div id="contractForm" style="display:none"> 
                             	 	<form action="/yh/customerContract/add" method="post">
                             	 		<input id="contractId" name="contractId" type="hidden">
                             	 		<lable>出发地点：</lable><input id="" name="" type="text" >
                             	 		<lable>目的地点：</lable><input id="" name="" type="text">
                             	 		<lable>费用：</lable><input id="" name="" type="text">
                             	 		<lable>公里数：</lable><input id="" name="" type="text">
                             	 		<a class="btn btn-default" href="/yh/account">保存</a>
			             				<button class="btn btn-default" id="cancel">取消</button>
                             	 	</form>	
                             	 </div>
                        		</div>
                        	
                            <!-- /.row (nested) -->
                       <div class="col-lg-12">
                         <div class="panel panel-default">
                            <div class="panel-heading">
                            	<i class="fa fa-list fa-fw"></i>合同干线费用
                        	</div>
                             <div class="panel-body">
                             	 <div class="table-responsive">
                             	 
                             	 
                                	<table class="table table-striped table-bordered table-hover" id="dataTables-example">
	                                    <thead>
	                                        <tr>
	                                            <th>始发地</th>
	                                            <th>目的地</th>
	                                            <th>费用</th>
	                                            <th>公里数</th>
	                                            <th></th>
	                                        </tr>
	                                    </thead>
	                                    <tbody>
	                                        <tr class="odd gradeX">
	                                            <td>1广州</td>
	                                            <td>武汉</td>
	                                            <td class="center">3000</td>
	                                            <td class="center">2000公里</td>
	                                            <td class="center">编辑 删除</td>
	                                        </tr>
	                                    </tbody>
                               		 </table>
                            </div>
                          </div>
                        </div>
                      </div> 
                            <!-- /.table-responsive -->

                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->      
</div>
			
	<!--/span-->


<!--/row-->

<!-- content ends -->
<%}%>
 <!-- 引入dataTables的js 文件- Tables -->
<script src="/yh/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/yh/js/plugins/dataTables/dataTables.bootstrap.js"></script>

<!-- 引入校验的js 文件及其 中文 文件-->
<script src="/eeda/js/jquery.validate.min.js"></script>
<script src="/eeda/js/jvalidate.messages_cn.js"></script>
<script>
    $(document).ready(function() {
        var oTable = $('#dataTables-example').dataTable();

        $('#customerForm').validate({
            rules: {
              company_name: {//form 中company_name为必填, 注意input 中定义的id, name都要为company_name
                required: true
              },
              name:{//form 中 name为必填
                required: true
              }
            },
            highlight: function(element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            success: function(element) {
                element.addClass('valid').closest('.form-group').removeClass('has-error').addClass('has-success');
            }
        });
        
        //点击button显示添加合同干线
        $("#btn").click(function(){
        	$("#contractForm").show();
        });
        $("#cancel").click(function(){
        	$("#contractForm").hide();
        });
        //获取客户的list，选中信息自动填写其他信息
       /*  $('#company_name').on('keyup', function(){
			var inputStr = $('#fromName').val();
			$.get('/yh/route/search', {companyName:inputStr}, function(data){
				console.log(data);
				var customerList =$("#customerList");
				customerList.empty();
				for(var i = 0; i < data.length; i++)
				{
					customerList.append("<li><a tabindex='-1' class='customerItem' code='"+data[i].CODE+"'>("+data[i].CODE+")"+data[i].NAME+"</a></li>");
				}
				
				customerList.show();
			},'json');
		});
	
		$('#customerList').on('click', '.customerItem', function(e){
			var code=$(this).attr('code');
        	$('#company_name').val($(this).text());
        	$("#customerList").hide();
    	}); */
        
    });
</script>
