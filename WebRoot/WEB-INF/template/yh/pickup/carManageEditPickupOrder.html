<%layout("/yh/layout.html"){%>
<link href="/yh/js/plugins/sco/css/sco.message.css" rel="stylesheet">
	<link rel="stylesheet" href="/yh/css/ui/jquery-ui.css">
        <div id="page-wrapper">
            <div class="row">
           
                <div class="col-lg-12">
                    <div class="btn-header">行车记录单</div>                  
                    <input type="hidden" id="pickupOrderId" value="${pickupOrder.id!''}">
                    <input type="hidden" id="finItemIds" value="${finItemIds!''}">
                    <input type="hidden" id="transferOrderType" value="${transferOrderAttr.order_type!''}">
                    <input type="hidden" id="finishBtnVal" value="${transferOrderMilestone.status!''}">
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        
                        <!-- /.panel-heading -->
                        <div class="panel-body" id="total">
                  
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#basic" data-toggle="tab" id = "chargeCheckOrderbasic">基本信息</a>
                                </li>
                                <li class=""><a href="#line" data-toggle="tab" id="addressList">线路</a>
                                </li>
                                <li class=""><a href="#cargos" data-toggle="tab" id="pickupOrderItemList">货品信息</a>
                                </li>
                                 <li class=""><a href="#milestone" data-toggle="tab" id="transferOrderMilestoneList">运输里程碑</a>
                                </li>
                                <li class=""><a href="#pickuparap" data-toggle="tab" id="pickupOrderPayment">应付</a>
                                </li>
                            </ul>
							
                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div class="tab-pane fade active in" id="basic">
                                 
                                <div class="row">
                                   <form id="pickupOrderForm" method="post" action="">
                                        <input id="sp_id" type="hidden" name="sp_id" value="${spParty.id!''}${pickupOrder.sp_id!''}"/>
                    			   		<input type="hidden" id="pickupId" name="pickupId" value="${pickupOrder.id!''}">
                                        <input id="driver_id" type="hidden" name="driver_id" value="${pickupOrder.driver_id!''}"/>                                   	  
                                       	<input type="hidden" name="order_no" value="${order_no!''}${pickupOrder.depart_no!''}"/>
                                       	<input type="hidden" name="status" value="${status!''}${pickupOrder.status!''}"/>
                                       	<input type="hidden" name="create_by" value="${create_by!''}${pickupOrder.create_by!''}"/>
		                                <div class="col-lg-6">
		                                <input class="" id="depart_id" value="${pickupOrder.depart_id!''}" type="hidden" name="depart_id" >
		                                <input class="" id="type" value="${type!''}" type="hidden" >
		            				    <input class="" id="message" value="${localArr!''}" type="hidden" name="orderid" >
		            				    <input class="" id="tr_itemid_list" value="" type="hidden" name="tr_itemid_list">
		            				    <input class="" id="item_detail" value="" type="hidden" name="item_detail" >                                  	
		                                <input id="carinfoId" type="hidden" name="carinfoId" value="${pickupOrder.carinfo_id!''}"/>                                    	
		                                <input id="checkedDetail" type="hidden" name="checkedDetail"/>                                    	
		                                <input id="uncheckedDetail" type="hidden" name="uncheckedDetail"/>                                    	
                                        
                                        	
                                       	<div id="pickupModes" class="form-group">
                                            <label><div>提货方式</div></label>
                                            ${customizeField.EX_TYPE!'公司自提'}
                                        </div> 
	                                        
                                 		<div>车辆信息</div>                                         
                                        <div class="form-group">
                                            <label>车牌</label>
                                             <div class="form-group">											
										        <input type="text" name="car_no" class="form-control" id="carNoMessage" value="${carinfo.car_no!''}" disabled>
										        <ul style="top: 17%; left: 2%;" tabindex="-1" class="pull-right dropdown-menu default" id="carNoList">
												</ul>
										    </div>
                                        </div>
                                        <div class="form-group">
											<label>司机</label>
										    <div class="form-group">													    								
										        <input type="hidden" id="carInfoDriverMessage" value="${carinfo.driver!''}">
										        <input type="text" name="driver_name" class="form-control" id="driverMessage" value="${driverContact.contact_person!''}" disabled>
										        <ul style="top: 17%; left: 2%;" tabindex="-1" class="pull-right dropdown-menu default" id="driverList">
												</ul>
										    </div>
									                                     
                                        <div class="form-group">
                                        <label>电话</label>
                                        <input id="carInfoDriverPhone" value="${carinfo.phone!''}" type="hidden">
                                        <input type="text" class="form-control" id="driver_phone" value="${driverContact.phone!''}"  name="driver_phone" disabled>
                                        </div>
                                        <!-- <div class="form-group">
	                                        <div style=display:inline-block;width:49%>
	                                            <label>车型</label>
	                                         	<input type="hidden" value="${carinfo.cartype!''}" id="carTypeSelect">
	                                            <select name="car_type" id="cartype" class="form-control">
                                                           <option ></option>
                                                           <option value="平板车">平板车</option>
                                                           <option value="高栏车">高栏车</option>
                                                           <option value="集装车">集装车</option>
                                                           <option value="单桥车">单桥车</option>
                                                           <option value="双桥车">双桥车</option>
                                                           <option value="半挂车">半挂车</option>
                                                           <option value="冷藏车">冷藏车</option>
                                                           <option value="特种车">特种车</option>
                                                           <option value="商品运输车">商品运输车</option>
                                                           <option value="危险品车">危险品车</option>
                                                           <option value="挂车">挂车</option>
                                                           <option value="爬梯车">爬梯车</option>
                                                           <option value="可拼车">可拼车</option>
                                                           <option value="低栏车">低栏车</option>
                                                           <option value="半挂一拖二">半挂一拖二</option>
                                                           <option value="半挂一拖三">半挂一拖三</option>
                                                           <option value="半挂二拖二">半挂二拖二</option>
                                                           <option value="半挂二拖三">半挂二拖三</option>
                                                           <option value="前四后四">前四后四</option>
                                                           <option value="前四后六">前四后六</option>
                                                           <option value="前四后八">前四后八</option>
                                                           <option value="前四后十">前四后十</option>
                                                           <option value="五轮车">五轮车</option>
                                                           <option value="后八轮">后八轮</option>
                                                           <option value="半封闭">半封闭</option>
                                                           <option value="封闭车">封闭车</option>
                                                           <option value="罐式车">罐式车</option>
                                                           <option value="厢式车">厢式车</option>
                                                           <option value="自卸车">自卸车</option>
                                                           <option value="棉被车">棉被车</option>
                                                           <option value="其他">其他</option>
                                                    </select>
                                                 </div>
	                                       <div style=display:inline-block;width:50%>			                                                               
	                                            <label>车辆长度</label>
	                                         	<input type="hidden" value="${carinfo.length!''}" id="carSizeSelect">
	                                            <select name="car_size" id="carsize" class="form-control">
                                                    <option value="0"></option>
                                                    <option value="21">21.0</option>
                                                    <option value="18.5">18.5</option>
                                                    <option value="18.0">18.0</option>
                                                    <option value="17.8">17.8</option>
                                                    <option value="17.5">17.5</option>
                                                    <option value="17.0">17.0</option>
                                                    <option value="16.0">16.0</option>
                                                    <option value="15.0">15.0</option>
                                                    <option value="14.5">14.5</option>
                                                    <option value="13.5">13.5</option>
                                                    <option value="13.0">13.0</option>
                                                    <option value="12.5">12.5</option>
                                                    <option value="9.6">9.6</option>
                                                    <option value="8.6">8.6</option>
                                                    <option value="8.0">8.0</option>
                                                    <option value="7.6">7.6</option>
                                                    <option value="7.2">7.2</option>
                                                    <option value="6.8">6.8</option>
                                                    <option value="6.5">6.5</option>
                                                    <option value="5.3">5.3</option>
                                                    <option value="4.3">4.3</option>                                                
	                                            </select>
	                                       </div>
	                                       </div>   -->
	                                		<div class="form-group">
                                            <label>跟车人</label>
                                            <input class="form-control" id="car_follow_name" name="car_follow_name" value="${pickupOrder.car_follow_name!''}">
                                            </div>
                                                                               
                                            <div class="form-group">
                                            <label>跟车人电话</label>
                                            <input class="form-control" id="car_follow_phone" name="car_follow_phone" value="${pickupOrder.car_follow_phone!''}">
                                            </div>
                                            <div class="form-group">
                                            <label>公里数</label>
                                            <input class="form-control" id="kilometres" name="kilometres" value="${pickupOrder.kilometres!''}">
                                            </div>
                                                                               
                                            <div class="form-group">
                                            <label>路桥费</label>
                                            <input class="form-control" id="roadBridge" name="roadBridge" value="${pickupOrder.road_bridge!''}">
                                            </div>
                                                                               
                                            <div class="form-group">
                                            <label>客户支付中转费</label>
                                            <input class="form-control" id="income" name="income" value="${pickupOrder.income!''}">
                                            </div>
                                            </div>
                                                   
                                            <div class="form-group">
												<label>发往</label>
												<div class="checkbox">
													<label><input id="checkbox1" type="checkbox" name="checkbox" value="yandCheckbox" disabled>货场</label>
												</div>
	                                            <div id="addressDiv" class="form-group" style="display: none;">
		                                            <label>目的地</label>
		                                            <input class="form-control" id="address" name="address" value="${pickupOrder.address!''}" disabled>
	                                            </div>
	                                            
												<div class="checkbox">
													<label><input id="checkbox2" type="checkbox" name="checkbox" value="warehouseCheckbox" disabled>仓库</label>
												</div>
												<div id="warehouseDiv" class="form-group" style="display: none;">
													<input id="hideWarehouseId" type="hidden" value="${pickupOrder.warehouse_id!''}"/>     
	                                                <select id="gateInSelect" class="form-control" name="gateInSelect" disabled></select>
                                                </div>
											</div>
                                        </div> 
                                  
	                                   <div class="col-lg-6">
	                                  		<div>拼车信息</div>                                           
	                                            <div class="form-group">
	                                                <label>拼车单号</label> <strong>${order_no!''} ${pickupOrder.depart_no!''}</strong>
	                                            </div>
	                                            <div class="form-group">
	                                                <label>单据状态</label>   ${status!''} ${pickupOrder.status!''}
	                                            </div>
	                                            <div class="form-group">
	                                            <label>创建人</label>  <%if(userLogin.c_name!''==''){ %>${userLogin.user_name!''}<%}else{%>${userLogin.c_name!''}<%}%>
	                                            <%if(userLogin2.c_name!''==''){ %>${userLogin2.user_name!''}<%}else{%>${userLogin2.c_name!''}<%}%>                                     
	                                        </div>
		                                                                                                                         
											<div class="form-group">
	                                            <label>备注</label>
	                                            <textarea class="form-control" rows="8" id="remark" name="remark" disabled>${pickupOrder.remark!''}</textarea>
	                                        </div> 
	                                   </div>
                                    </div>   
                                </form>
                            </div>
                            
                            <div class="tab-pane fade" id="line">  
                            	<div class="panel-body">
                            	<div class="controls">
                                	<button class="btn  btn-primary" data-toggle="modal" data-target="#addExternalTransferOrder" disabled>
									  添加额外运输单
									</button>
                                </div>
                                    <div class="table-responsive"> 
                                    	<form id="pickupAddressForm" action="">
                                    		<input type="hidden" id="addressPickupOrderId" value="${pickupOrder.id!''}" name="pickupOrderId">
	                                        <table class="table table-striped table-bordered table-hover">
	                                            <thead>
	                                                <tr>
	                                                    <th>运输单号</th>
	                                                    <th>客户</th>
	                                                    <th>提货地点</th>
	                                                    <th>创建时间</th>
	                                                    <th>货场</th>
	                                                    <th>仓库</th>
	                                                    <th>状态</th>
	                                                    <th>操作</th>
	                                                </tr>
	                                            </thead>
	                                            <tbody id="pickupAddressTbody" >
	                                            </tbody>
	                                        </table>
                                        </form>
                                    </div>
                                    <!-- /.table-responsive -->
                                </div>
                            </div>
                            
							<!-- 模态框 -->
							<div class="modal fade" id="addExternalTransferOrder" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							  <div class="modal-dialog">
							    <div class="modal-content">
							      <div class="modal-header">
							        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							        <h4 class="modal-title" id="myModalLabel">添加额外运输单</h4>
							      </div>
							      <div class="modal-body">
							      	<form id="addExternalTransferOrderForm" action="">
							      		<input type="hidden" name="transferOrderIds" id="transferOrderIds"/>
							      		<input type="hidden" name="pickupOrderId" id="addExternalPickupOrderId"/>
							      		<div class="table-responsive">
			                                <table class="table table-striped table-bordered table-hover" id="external-table">
			                                    <thead>
			                                        <tr>
			                                            <th></th>
			                                            <th>运输单号</th>
			                                            <th>订单类型</th>
			                                            <th>货品</th>
			                                            <th>提货地点</th>
			                                            <th>提货方式</th>
			                                            <th>状态</th>                                         
			                                            <th>客户</th>                                         
			                                            <th>始发城市</th>                                         
			                                            <th>目的地城市</th>                                         
			                                            <th>创建时间</th>                                         
			                                         </tr>
			                                    </thead>
			                                    <tbody>                                        
			                                    </tbody>
			                                </table>
			                            </div>
								      <div class="modal-footer">
								        <button type="button" class="btn  btn-primary" data-dismiss="modal">取消</button>
								        <button id="addExternalTransferOrderFormBtn" type="button" class="btn  btn-primary">保存</button>
								      </div>
									</form>
								  </div>
							    </div><!-- /.modal-content -->
							  </div><!-- /.modal-dialog -->
							</div><!-- /.modal -->
									
                                <div class="tab-pane fade" id="cargos">  
                                     <div class="panel-body" style="" id="ATMitem">
                                     <div class="table-responsive">                                        
		                                <table class="table table-striped table-bordered table-hover" id="pickupItem-table">                              
		                                <thead>
		                                        <tr>
		                                        	<th>客户</th> 
		                                        	<th>运输单号</th> 
		                                         	<th>型号</th> 
		                                            <th>名称</th>
		                                            <th>数量</th>                                   
		                                            <th>体积</th> 
		                                            <th>重量</th> 
		                                            <th>备注</th>                                          
		                                           <th>操作</th>
		                                        </tr>
		                                    </thead>                               
		                                    <tbody>                                                                                                   
		                                    </tbody>
		                                </table>                                
                                     </div>
                                     
                                     <!-- /.table-responsive -->
                                     <div style="display: none" id="transferOrderItemDateil">
                                         <div class="btn-header">单品列表</div>
										 <input id="item_id" value=0 type="hidden" >
                                         <div class="table-responsive">                                        
                                         <table id="pickupDetail-table" class="table table-striped table-bordered table-hover dataTable">
                                              <thead>
                                                  <tr role="row">
                                                  <th class="sorting"></th>
                                                  <th class="sorting">名称</th>
                                                  <th class="sorting">型号</th>
                                                  <th class="sorting_asc">序列号</th>
                                                  <th class="sorting">体积</th>
                                                  <th class="sorting">重量</th>
                                                  <th class="sorting">备注</th>	                                                  
                                                  </tr>
                                              </thead>
                                           </table>
                                        </div>
                                        <div class="form-group">
                                        	<a id="styleSave" style="display:none"><i class="fa fa-check"></i></a>
                                        </div>
                                    </div>
                                 </div>                							
                               </div>
                                
                                <!-- 模态框 -->
								<div class="modal fade" id="transferOrderMilestone" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
								  <div class="modal-dialog">
								    <div class="modal-content">
								      <div class="modal-header">
								        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
								        <h4 class="modal-title" id="myModalLabel">新里程碑</h4>
								      </div>
								      <div class="modal-body">
								      	<form id="transferOrderMilestoneForm" action="">
								      		<input id="milestonePickupId" type="hidden" name="milestonePickupId" />
											<div class="form-group ">
											<label class="control-label" for="inputSuccess">状态(不填默认为"在途")</label> <input
												id="status" class="form-control" type="text"
												name="status">
											</div>
											<div class="form-group ">
											<label class="control-label" for="inputSuccess">地点</label> <input
												id="location" class="form-control" type="text"
												name="location">
											</div>
									      </div>
									      <div class="modal-footer">
									        <button type="button" class="btn  btn-primary" data-dismiss="modal">取消</button>
									        <button id="transferOrderMilestoneFormBtn" type="button" class="btn  btn-primary">保存</button>
									      </div>
										</form>
								    </div><!-- /.modal-content -->
								  </div><!-- /.modal-dialog -->
								</div><!-- /.modal -->
									
                                <div class="tab-pane fade" id="milestone">
                                    <div class="panel-body">
                                        <div class="table-responsive">                                        
			                            <button class="btn  btn-primary" data-toggle="modal" data-target="#transferOrderMilestone" disabled>
										  新里程碑
										</button>
                                            <table class="table table-striped table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>状态</th>
                                                        <th>地点</th>
                                                        <th>更新用户</th>
                                                        <th>更新时间</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="transferOrderMilestoneTbody" >
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- /.table-responsive -->
                                    </div>
                                    <!-- /.panel-body -->
                                </div>
                                
                                <div class="tab-pane fade" id="pickuparap">
                                    <h2>应付</h2>
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover"  id ="table_fin2">
                                                <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th>费用条目</th>
                                                        <th>金额</th>
                                                        <th>备注</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- /.table-responsive -->
                                    </div>
                                    <!-- /.panel-body -->
                            </div>
                        </div>
                        
                        <div class="modal fade" id="detailDialog" tabindex="-1">
							<div class="modal-dialog">
                                <div class="col-lg-4" class="col-lg-4" style="border-top-width: 0px; margin-top: 100px; width: 350px; height: 200px; margin-left: 150px;">
	                    			<div class="panel panel-default">
		                       			<div class="panel-heading">
		                            		温馨提示
		                        		</div>
		                       			<div class="panel-body">
		                            		<p>单据创建完毕,是否继续创建？</p>
		                        		</div>
		                        		<form id="detailCheckBoxForm" method="post" action="/pickupOrder/createPickupOrder">
		                        			<input type="hidden" name="localArr" value="${localArr!''}">
			                       			<div class="panel-footer">
			                          			<a class="btn  btn-primary" href="/pickupOrder">否</a>
			                          			<button id="continueCreateBtn" type="button" class="btn  btn-primary" data-toggle="tooltip" title="" data-original-title="Default tooltip">是</button>
			                        		</div>                        		
		                        		</form>
	                   				</div> 
				                </div>
			                </div>      
			            </div> 
                        
                        <!-- /.panel-body --> 
                        <div class=".tooltip-demo">
                            <hr/>
                        	<a style="display:none" id ="style"><i class='fa fa-check'></i></a>                            
		               		<button id="saveCarManageBtn" type="button" class="btn  btn-primary" data-toggle="tooltip" title="" data-original-title="Default tooltip">保存</button>
		               		<a class="btn  btn-primary" href="/carmanage">返回</a>
                        </div>                       
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
			</div> 
            </div>
        </div>
        <!-- /#page-wrapper -->

<%}%>


<script src="/yh/css/ui/jquery-ui.js"></script>
<script src="/yh/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/yh/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script src="/yh/js/plugins/dataTables/jquery.dataTables.editable.js" type="text/javascript"></script>
<script src="/yh/js/plugins/dataTables/jquery.jeditable.js" type="text/javascript"></script>
<!-- 引入校验的js 文件及其 中文 文件-->
<script src="/yh/js/jquery.validate.min.js"></script>
<script src="/yh/js/jvalidate.messages_cn.js"></script>

<script src="/yh/js/pickup/carManageEdit.js"></script>

<script src="/yh/js/plugins/sco/js/sco.message.js"></script>
