<%layout("/yh/layout.html"){%>

        <div id="page-wrapper">
            <div class="row">
           
                <div class="col-lg-12">
                    <h1 class="page-header">拼车单</h1>                  
                    <input type="hidden" id="pickupOrderId" value="${pickupOrder.id!''}">
                    <input type="hidden" id="finishBtnVal" value="${transferOrderMilestone.status!''}">
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        
                        <!-- /.panel-heading -->
                        <div class="panel-body" id="total">
                  
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#basic" data-toggle="tab">基本信息</a>
                                </li>
                                <li class=""><a href="#line" data-toggle="tab" id="addressList">线路</a>
                                </li>
                                <li class=""><a href="#cargos" data-toggle="tab" id="pickupOrderItemList">货品信息</a>
                                </li>
                                 <li class=""><a href="#milestone" data-toggle="tab" id="transferOrderMilestoneList">运输里程碑</a>
                                </li>
                                <li class=""><a href="#arap" data-toggle="tab">应付</a>
                                </li>
                            </ul>

                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div class="tab-pane fade active in" id="basic">
                                 
                                <div class="row">
                                   <form id="pickupOrderForm" method="post" action="">
                                        <input id="sp_id" type="hidden" name="sp_id" value="${pickupOrder.sp_id!''}"/>
                    			   		<input type="hidden" id="pickupId" name="pickupId" value="${pickupOrder.id!''}">
                                        <input id="driver_id" type="hidden" name="driver_id" value="${pickupOrder.driver_id!''}"/>                                   	  
                                       	<input type="hidden" name="order_no" value="${order_no!''}${pickupOrder.depart_no!''}"/>
                                       	<input type="hidden" name="status" value="${status!''}${pickupOrder.status!''}"/>
                                       	<input type="hidden" name="create_by" value="${create_by!''}${pickupOrder.create_by!''}"/>
		                                <div class="col-lg-6">
		                                <input class="" id="depart_id" value="${pickupOrder.depart_id!''}" type="hidden" name="depart_id" >
		                                <input class="" id="type" value="${type!''}" type="hidden" >
		            				    <input class="" id="message" value="${localArr!''}" type="hidden" name="orderid" >
		            				    <input class="" id="tr_itemid_list" value="" type="hidden" name="tr_itemid_list">
		            				    <input class="" id="item_detail" value="" type="hidden" name="item_detail" >
		                                <input id="driver_id" type="hidden" name="driver_id"/>                                    	
                                        
                                        	
	                                       	<div class="form-group">
	                                            <label><h2>提货方式</h2></label>
	                                           	<input id="pickupModeRadio" type="hidden" value="${pickupOrder.pickup_mode!''}"/>
	                                            <label class="radio-inline">
	                                                <input type="radio" name="pickupMode" id="pickupMode1" value="routeSP" checked="">干线供应商自提
	                                            </label>
	                                            <label class="radio-inline">
	                                                <input type="radio" name="pickupMode" id="pickupMode2" value="pickupSP">外包供应商提货
	                                            </label>
	                                            <label class="radio-inline">
	                                                <input type="radio" name="pickupMode" id="pickupMode3" value="own">源鸿自提
	                                            </label>
	                                        </div> 
                                            
                                        <h2>供应商信息</h2>
                                           <div class="form-group">
                                               <!--label>供应商名称</label-->
                                               <input id="spMessage" class="form-control" placeholder="选择供应商" type="text" name="spMessage"  value="${spContact.company_name!''}"/>
                                               <ul id='spList' class="pull-right dropdown-menu default" tabindex="-1" style="top: 35%; left: 2%;">
   											</ul>
                                           </div>
                                           <div class="form-group">     
                                           	   <h5 id="pageSpName">${spContact.contact_person!''} ${spContact.phone!''}</h5><h5 id="pageSpAddress">${spContact.address!''}</h5>     
                                           </div>
                                               
                                 		<h2>车辆信息</h2> 
                                        <div class="form-group">
											<label>司机</label>
										    <div class="form-group">											
										        <input type="text" name="driver_name" class="form-control" id="driverMessage" value="${driver.contact_person!''}">
										        <ul style="top: 17%; left: 2%;" tabindex="-1" class="pull-right dropdown-menu default" id="driverList">
												</ul>
										    </div>
									    </div>
									                                     
                                        <div class="form-group">
                                        <label>电话</label>
                                        <input class="form-control" id="driver_phone" value="${driver.phone!''}"  name="driver_phone">
                                        </div>  
                                        
                                        <div class="form-group">
                                            <label>车牌</label>
                                             <input class="form-control" id="car_no" value="${pickupOrder.car_no!''}"  name="car_no">
                                        </div>
                                        <div class="form-group">
	                                        <div style=display:inline-block;width:49%>
	                                            <label>车型</label>
	                                         	<input type="hidden" value="${pickupOrder.car_type!''}" id="carTypeSelect">
	                                            <select name="car_type" id="cartype" class="form-control">
                                                           <option value="全部">全部</option>
                                                           <option value="平板车">平板车</option>
                                                           <option value="高栏车">高栏车</option>
                                                           <option value="集装车">集装车</option>
                                                           <option value="单桥车">单桥车</option>
                                                           <option value="双桥车">双桥车</option>
                                                           <option value="半挂车">半挂车</option>
                                                           <option value="冷藏车">冷藏车</option>
                                                           <option value="特种车">特种车</option>
                                                           <option value="商品运输车">商品运输车</option>
                                                           <option value="危险品车">危险品车</option>
                                                           <option value="挂车">挂车</option>
                                                           <option value="爬梯车">爬梯车</option>
                                                           <option value="可拼车">可拼车</option>
                                                           <option value="低栏车">低栏车</option>
                                                           <option value="半挂一拖二">半挂一拖二</option>
                                                           <option value="半挂一拖三">半挂一拖三</option>
                                                           <option value="半挂二拖二">半挂二拖二</option>
                                                           <option value="半挂二拖三">半挂二拖三</option>
                                                           <option value="前四后四">前四后四</option>
                                                           <option value="前四后六">前四后六</option>
                                                           <option value="前四后八">前四后八</option>
                                                           <option value="前四后十">前四后十</option>
                                                           <option value="五轮车">五轮车</option>
                                                           <option value="后八轮">后八轮</option>
                                                           <option value="半封闭">半封闭</option>
                                                           <option value="封闭车">封闭车</option>
                                                           <option value="罐式车">罐式车</option>
                                                           <option value="厢式车">厢式车</option>
                                                           <option value="自卸车">自卸车</option>
                                                           <option value="棉被车">棉被车</option>
                                                           <option value="其他">其他</option>
                                                    </select>
                                                 </div>
	                                       <div style=display:inline-block;width:50%>			                                                               
	                                            <label>车辆长度</label>
	                                         	<input type="hidden" value="${pickupOrder.car_size!''}" id="carSizeSelect">
	                                            <select name="car_size" id="carsize" class="form-control">
                                                    <option>21</option>
                                                    <option>18.5</option>
                                                    <option>18.0</option>
                                                    <option>17.8</option>
                                                    <option>17.5</option>
                                                    <option>17.0</option>
                                                    <option>16.0</option>
                                                    <option>15.0</option>
                                                    <option>14.5</option>
                                                    <option>13.5</option>
                                                    <option>13.0</option>
                                                    <option>12.5</option>
                                                    <option>9.6</option>
                                                    <option>8.6</option>
                                                    <option>8.0</option>
                                                    <option>7.6</option>
                                                    <option>7.2</option>
                                                    <option>6.8</option>
                                                    <option>6.5</option>
                                                    <option>5.3</option>
                                                    <option>4.3</option>                                                
	                                            </select>
	                                       </div>
	                                       </div>  
	                                		<div class="form-group">
                                            <label>跟车人</label>
                                            <input class="form-control" id="car_follow_name" name="car_follow_name" value="${pickupOrder.car_follow_name!''}">
                                            </div>
                                                                               
                                            <div class="form-group">
                                            <label>跟车人电话</label>
                                            <input class="form-control" id="car_follow_phone" name="car_follow_phone" value="${pickupOrder.car_follow_phone!''}">
                                            </div>
                                            <div class="form-group">
                                            <label>公里数</label>
                                            <input class="form-control" id="kilometres" name="kilometres" value="${pickupOrder.kilometres!''}">
                                            </div>
                                                                               
                                            <div class="form-group">
                                            <label>路桥费</label>
                                            <input class="form-control" id="roadBridge" name="roadBridge" value="${pickupOrder.road_bridge!''}">
                                            </div>
                                            
                                            <div class="form-group">
												<label>发往</label>
												<div class="checkbox">
													<label><input id="checkbox1" type="checkbox" name="checkbox" value="yandCheckbox">货场</label>
												</div>
	                                            <div id="addressDiv" class="form-group" style="display: none;">
		                                            <label>目的地</label>
		                                            <input class="form-control" id="address" name="address" value="${pickupOrder.address!''}">
	                                            </div>
	                                            
												<div class="checkbox">
													<label><input id="checkbox2" type="checkbox" name="checkbox" value="warehouseCheckbox">仓库</label>
												</div>
												<div id="warehouseDiv" class="form-group" style="display: none;">
													<input id="hideWarehouseId" type="hidden" value="${pickupOrder.warehouse_id!''}" />     
	                                                <select id="gateInSelect" class="form-control" name="gateInSelect"></select>
                                                </div>
											</div>
                                        </div> 
                                  
	                                   <div class="col-lg-6">
	                                  		<h2>拼车信息</h2>                                           
	                                            <div class="form-group">
	                                                <label>拼车单号</label> <strong>${order_no!''} ${pickupOrder.depart_no!''}</strong>
	                                            </div>
	                                            <div class="form-group">
	                                                <label>单据状态</label>   ${status!''} ${pickupOrder.status!''}
	                                            </div>
	                                            <div class="form-group">
	                                            <label>创建人</label>   ${userLogin.user_name!''}   ${userLogin2.user_name!''}                                         
	                                        </div>
		                                                                                                                         
											<div class="form-group">
	                                            <label>备注</label>
	                                            <textarea class="form-control" rows="8" id="remark" name="remark">${pickupOrder.remark!''}</textarea>
	                                        </div> 
	                                   </div>
                                    </div>   
                                </form>
                            </div>
                            
                            <div class="tab-pane fade" id="line">  
                            	<div class="panel-body">
                            	<div class="controls">
                                	<button class="btn btn-primary" data-toggle="modal" data-target="#addExternalTransferOrder">
									  添加额外运输单
									</button>
                                </div>
                                    <div class="table-responsive"> 
                                    	<form id="pickupAddressForm" action="">
                                    		<input type="hidden" id="addressPickupOrderId" value="${pickupOrder.id!''}" name="pickupOrderId">
	                                        <table class="table table-striped table-bordered table-hover">
	                                            <thead>
	                                                <tr>
	                                                    <th>运输单号</th>
	                                                    <th>客户</th>
	                                                    <th>提货地点</th>
	                                                    <th>创建时间</th>
	                                                    <th>货场</th>
	                                                    <th>仓库</th>
	                                                    <th>操作</th>
	                                                </tr>
	                                            </thead>
	                                            <tbody id="pickupAddressTbody" >
	                                            </tbody>
	                                        </table>
                                        </form>
                                    </div>
                                    <!-- /.table-responsive -->
                                </div>
                            </div>
                            
							<!-- 模态框 -->
							<div class="modal fade" id="addExternalTransferOrder" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							  <div class="modal-dialog">
							    <div class="modal-content">
							      <div class="modal-header">
							        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							        <h4 class="modal-title" id="myModalLabel">添加额外运输单</h4>
							      </div>
							      <div class="modal-body">
							      	<form id="addExternalTransferOrderForm" action="">
							      		<input type="hidden" name="transferOrderIds" id="transferOrderIds"/>
							      		<input type="hidden" name="pickupOrderId" id="addExternalPickupOrderId"/>
							      		<div class="table-responsive">
			                                <table class="table table-striped table-bordered table-hover" id="external-table">
			                                    <thead>
			                                        <tr>
			                                            <th></th>
			                                            <th>运输单号</th>
			                                            <th>订单类型</th>
			                                            <th>货品</th>
			                                            <th>提货地点</th>
			                                            <th>提货方式</th>
			                                            <th>状态</th>                                         
			                                            <th>客户</th>                                         
			                                            <th>始发城市</th>                                         
			                                            <th>目的地城市</th>                                         
			                                            <th>创建时间</th>                                         
			                                         </tr>
			                                    </thead>
			                                    <tbody>                                        
			                                    </tbody>
			                                </table>
			                            </div>
								      <div class="modal-footer">
								        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
								        <button id="addExternalTransferOrderFormBtn" type="button" class="btn btn-primary">保存</button>
								      </div>
									</form>
								  </div>
							    </div><!-- /.modal-content -->
							  </div><!-- /.modal-dialog -->
							</div><!-- /.modal -->
									
                                <div class="tab-pane fade" id="cargos">  
                                     <div class="panel-body" style="" id="ATMitem">
                                     <div class="table-responsive">                                        
		                                <table class="table table-striped table-bordered table-hover" id="pickupItem-table">                              
		                                <thead>
		                                        <tr>
		                                        	<th>客户</th> 
		                                        	<th>运输单号</th> 
		                                         	<th>型号</th> 
		                                            <th>名称</th>
		                                            <th>数量</th>                                   
		                                            <th>体积</th> 
		                                            <th>重量</th> 
		                                            <th>备注</th>                                          
		                                           <th>操作</th>
		                                        </tr>
		                                    </thead>                               
		                                    <tbody>
		                                        <tr>                                      
			                                        <td>yd20132014123</td>
			                                        <td>xlk25642</td>
			                                        <td>ATM</td>
			                                        <td>1</td>
		                                            <td>100</td>
		                                            <td>200kg</td>
		                                            <td>一台ATM机</td>
		                                        </tr>                                                                                                     
		                                    </tbody>
		                                </table>                                
                                     </div>
                                     
                                     <!-- /.table-responsive -->
                                     <div style="display: none" id="transferOrderItemDateil">
                                         <h3 class="page-header">单品列表</h3>
										 <input id="item_id" value=0 type="hidden" >
                                         <div class="table-responsive">                                        
                                         <table id="pickupDetail-table" class="table table-striped table-bordered table-hover dataTable">
                                              <thead>
                                                  <tr role="row">
                                                  <th class="sorting"></th>
                                                  <th class="sorting">名称</th>
                                                  <th class="sorting">型号</th>
                                                  <th class="sorting_asc">序列号</th>
                                                  <th class="sorting">体积</th>
                                                  <th class="sorting">重量</th>
                                                  <th class="sorting">备注</th>	                                                  
                                                  </tr>
                                              </thead>
                                           </table>
                                        </div>
                                        <div class="form-group">
                                        	<a id="styleSave" style="display:none"><i class="fa fa-check"></i></a>
                                        </div>
                                    </div>
                                 </div>                							
                               </div>
                                
                                <!-- 模态框 -->
								<div class="modal fade" id="transferOrderMilestone" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
								  <div class="modal-dialog">
								    <div class="modal-content">
								      <div class="modal-header">
								        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
								        <h4 class="modal-title" id="myModalLabel">新里程碑</h4>
								      </div>
								      <div class="modal-body">
								      	<form id="transferOrderMilestoneForm" action="">
								      		<input id="milestonePickupId" type="hidden" name="milestonePickupId" />
											<div class="form-group ">
											<label class="control-label" for="inputSuccess">状态(不填默认为"在途")</label> <input
												id="status" class="form-control" type="text"
												name="status">
											</div>
											<div class="form-group ">
											<label class="control-label" for="inputSuccess">地点</label> <input
												id="location" class="form-control" type="text"
												name="location">
											</div>
									      </div>
									      <div class="modal-footer">
									        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
									        <button id="transferOrderMilestoneFormBtn" type="button" class="btn btn-primary">保存</button>
									      </div>
										</form>
								    </div><!-- /.modal-content -->
								  </div><!-- /.modal-dialog -->
								</div><!-- /.modal -->
									
                                <div class="tab-pane fade" id="milestone">
                                    <div class="panel-body">
                                        <div class="table-responsive">                                        
			                            <button class="btn btn-primary" data-toggle="modal" data-target="#transferOrderMilestone">
										  新里程碑
										</button>
                                            <table class="table table-striped table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>状态</th>
                                                        <th>地点</th>
                                                        <th>更新用户</th>
                                                        <th>更新时间</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="transferOrderMilestoneTbody" >
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- /.table-responsive -->
                                    </div>
                                    <!-- /.panel-body -->
                                </div>
                                
                                <div class="tab-pane fade" id="arap">
                                    <h2>应收</h2>
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>#</th>
                                                        <th>费用条目</th>
                                                        <th>金额</th>
                                                        <th>备注</th>
                                                        <th>结算状态</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="pay">
                                                       <tr>
                                                       <td></td>
                                                       <td>运输费</td>
                                                       <td>1000</td>
                                                       <td>运输费用费</td>
                                                       <td>未结算</td>
                                                       </tr>                                               
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- /.table-responsive -->
                                    </div>
                            </div>
                        </div>
                        <!-- /.panel-body --> 
                        <div class=".tooltip-demo">
                            <hr/>
                        	<a style="display:none" id ="style"><i class='fa fa-check'></i></a>                            
		               		<button id="saveTransferOrderBtn" type="button" class="btn btn-default" data-toggle="tooltip" title="" data-original-title="Default tooltip">保存</button>
		               		<button id="finishBtn" disabled="disabled" type="button" class="btn btn-default" data-toggle="tooltip" title="" data-original-title="Default tooltip">已完成</button>
		               		<a class="btn btn-default" href="/yh/pickupOrder">返回</a>
                        </div>                       
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
			</div> 
            </div>
        </div>
        <!-- /#page-wrapper -->

<%}%>
<script src="/yh/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/yh/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script src="/yh/js/jquery.validate.min.js"></script>
<script src="/yh/js/jvalidate.messages_cn.js"></script>
<script src="/yh/js/pickup/edit.js"></script>