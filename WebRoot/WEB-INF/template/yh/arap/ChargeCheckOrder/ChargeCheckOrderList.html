

<%layout("/yh/layout.html"){%>
<link href="/yh/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
<link href="/yh/js/plugins/sco/css/sco.message.css" rel="stylesheet">
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    
                </div>
                <!-- /.col-lg-12 -->
            </div>

            <div class="row">
                <div class="col-lg-12">
                     <div class="panel panel-default">
                        <div class="panel-body">
                            <!-- Nav tabs -->
                            <ul id="orderTabs" class="nav nav-tabs">
                                <li class="active"><a href="#create" data-toggle="tab" data-src="create" id ="chargeCheckOrderbasic" >创建应收对账单</a>
                                </li>
                                <li class=""><a href="#search" data-toggle="tab" id="chargeCheckOrderItem">查询应收对账单</a>
                                </li>                               
                            </ul>
                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div class="tab-pane fade active in" id="create">
                                    
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <div class="panel-body">
                                                    <div class="row">
                                                        <form role="form" style="margin: 0 15px;" id='returnOrderSearchForm'>
                                                            <div class="row search_panel">
                                                                <div class="col-lg-4">
                                                                    <div class="form-group">
                                                                        <label class="search-label">客户</label>
                                                                        <input type="text" class="form-control search-control customer_filter" id="customer_filter"  placeholder="请输入或者选择客户">
                                                                        <ul id='companyList' tabindex="-1" class="pull-right dropdown-menu default" style="top: 45%; left: 32%;"></ul>
                                                                        
                                                                    </div>
                                                                    <div class="form-group">
                                                                        <label class="search-label">运输单号</label>
                                                                        <input type="text" class="form-control search-control orderNo_filter" id="orderNo_filter" value="">
                                                                    </div>
                                                                </div>
                                                                <!-- end of col-lg-6-->
                                                                <div class="col-lg-4">
                                                                     <div class="form-group">
                                                                        <label class="search-label">始发地</label>
                                                                        <input type="text" class="form-control search-control address_filter" id="address_filter">
                                                                    </div>
                                                                   
                                                                    <div class="form-group">
                                                                        <label class="search-label">收入状态</label>
                                                                        <select id="shouru_filter" class="form-control search-control shouru_filter">
                                                                        	<option></option>
                                                                        	<option value="未收款">未收款</option>
                                                                        	<option value="部分收款">部分收款</option>
                                                                        	<option value="已收款">已收款</option>
                                                                        </select>
                                                                        <!-- <input type="text" class="form-control search-control officeName_filter" id="shouru_filter"> -->
                                                                    </div>
                                                                </div>
                                                                <div class="col-lg-4">
                                                                	<div class="form-group">
                                                                        <label class="search-label">客户订单号</label>
                                                                        <input type="text" class="form-control search-control orderNo_filter" id="customerNo_filter" value="">
                                                                    </div>
                                                                </div>
                                                                <!-- end of col-lg-6-->
                                                            </div><!-- end of row-->
                                                            <div class="row">
                                                                <div class="col-lg-4">
                                                                    <div class="form-group">                                        
                                                                        <div id="datetimepicker" class="input-append date "> 
                                                                            <label class="search-label">发车开始时间</label> 
                                                                            <input id="beginTime_filter" class="form-control search-control  beginTime_filter" type="text">
                                                                            <span class="add-on">  
                                                                                <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>  
                                                                            </span>  
                                                                        </div>
                                                                    </div>    
                                                                </div>
                                                                <!-- end of col-lg-6-->
                                                                <div class="col-lg-4">
                                                                    <div class="form-group">                                                    
                                                                        <span id="datetimepicker2" class="input-append date search-control "> 
                                                                            <label class="search-label">发车结束时间</label> 
                                                                            <input id="endTime_filter" class="form-control search-control endTime_filter" type="text">
                                                                            <span class="add-on">  
                                                                                <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>  
                                                                            </span>  
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                
                                                                <!-- end of col-lg-6-->
                                                            </div>
                                                            <div class="row">
                                                                <div class="col-lg-4">
                                                                    <div class="form-group">                                        
                                                                        <div id="datetimepicker3" class="input-append date "> 
                                                                            <label class="search-label">计划开始时间</label> 
                                                                            <input id="beginTime_filter1" class="form-control search-control  beginTime_filter" type="text">
                                                                            <span class="add-on">  
                                                                                <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>  
                                                                            </span>  
                                                                        </div>
                                                                    </div>    
                                                                </div>
                                                                <!-- end of col-lg-6-->
                                                                <div class="col-lg-4">
                                                                    <div class="form-group">                                                    
                                                                        <span id="datetimepicker4" class="input-append date search-control "> 
                                                                            <label class="search-label">计划结束时间</label> 
                                                                            <input id="endTime_filter1" class="form-control search-control endTime_filter" type="text">
                                                                            <span class="add-on">  
                                                                                <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>  
                                                                            </span>  
                                                                        </span>
                                                                    </div>
                                                                </div>
                                                                
                                                                <!-- end of col-lg-6-->
                                                            </div><!-- end of row-->
                                                        </form>                                                        

														<div class="row">
									                        <form id="createForm" action="/chargeCheckOrder/create" method="post">
									                            <input id='checkedReturnOrder' name='returnOrderIds' type="hidden">
									                            <input id='checkedMiscOrder' name='miscOrderIds' type="hidden">
									                            <input id='order' name='order' type="hidden">
									                            <div class="col-lg-6">
									                                <div class="form-group">
									                                    <div class="controls">
									                                      <% if(shiro.hasPermission("ChargeCheckOrder.create")){%>
									                                      	<button id="saveBtn" type="button" class="btn  btn-primary" data-toggle="tooltip" title="" data-original-title="Default tooltip">创建对账单</button>
									                                      <%}%>
									                                    </div>
									                                </div>
									                            </div>    
									                        </form> 
									                    </div>
									                    <div class="form-group">
								                            <ul id="orderTabs" class="nav nav-tabs">
								                                <li class="active"><a href="#unchecked" data-toggle="tab" data-src="unchecked" id ="uncheckedChargeCheckOrder">未选中明细</a>
								                                </li>
								                                <li class=""><a href="#checked" data-toggle="tab" id="checkedChargeCheckOrder">已选中明细</a>
								                                </li>                               
								                            </ul>
                                                        </div>
                                                    </div>
                                                    <div class="tab-content">
	                               					 <div class="tab-pane fade active in" id="unchecked">
	                                                    <div class="table-responsive">
	                                                        <table class="table table-striped table-bordered table-hover" id="uncheckedChargeCheck-table" style="width: 2800px;">
	                                                            <thead>
	                                                                <tr>
							                                            <th><input type="checkbox" id="allCheck" name="allCheck"></th>
							                                            <th></th>
							                                            <th>回单号</th>
							                                            <th>收入状态</th>
							                                            <th>合计收入</th>
							                                            <th>客户名称</th>
							                                            <th>供应商名称</th>
							                                            <th>计划时间</th>
							                                            <th>收货地址</th>
							                                            <th>发车时间</th>
							                                            <th>运输单号</th>
							                                            <th>配送单号</th>
							                                            <th>客户订单号</th>
							                                            <th>订单状态</th>
							                                            <th>回单时间</th>                                            
							                                            <th>始发地</th>
							                                            <th>目的地</th>
							                                            <th>合同运费</th>
							                                            <th>提货费</th>
							                                            <th>送货费</th>
							                                            <th>保险费</th>
							                                            <th>超里程费</th>
							                                            <th>台阶费</th>
							                                            <th>安装费</th>
							                                            <th>装卸费</th>
							                                            <th>仓租费</th>
							                                            <th>等待费</th>
							                                            <th>其他费用</th>
							                                            
							                                            <th>合计成本</th>
							                                            <th>收货地址</th>
							                                            <th>确认人</th>
							                                            <th>确认时间</th>
							                                            <th>备注</th>
							                                        </tr>
	                                                            </thead>
	                                                            <tbody id="uncheckedChargeCheckList">
	                                                                
	                                                            </tbody>
	                                                        </table>
	                                                    </div>
	                                                 </div>
	                                                 <div class="tab-pane fade active in" id="checked" style="display: none">
	                                                 	<div class="table-responsive">
	                                                        <table class="table table-striped table-bordered table-hover" id="checkedChargeCheck-table" style="width: 2800px;">
	                                                            <thead>
	                                                                <tr>
							                                            <th></th>
							                                            <th></th>
							                                            <th>回单号</th>
							                                            <th>收入状态</th>
							                                            <th>合计收入</th>
							                                            <th>客户名称</th>
							                                            <th>供应商名称</th>
							                                            <th>发车时间</th>
							                                            <th>运输单号</th>
							                                            <th>配送单号</th>
							                                            <th>客户订单号</th>
							                                            <th>订单状态</th>
							                                            <th>回单时间</th>                                            
							                                            <th>始发地</th>
							                                            <th>目的地</th>
							                                            <th>合同运费</th>
							                                            <th>提货费</th>
							                                            <th>送货费</th>
							                                            <th>保险费</th>
							                                            <th>超里程费</th>
							                                            <th>台阶费</th>
							                                            <th>安装费</th>
							                                            <th>装卸费</th>
							                                            <th>仓租费</th>
							                                            <th>等待费</th>
							                                            <th>其他费用</th>
							                                            <th>合计收入</th>
							                                            <th>合计成本</th>
							                                            <th>收货地址</th>
							                                            <th>确认人</th>
							                                            <th>确认时间</th>
							                                            <th>备注</th>
							                                        </tr>
	                                                            </thead>
	                                                            <tbody id="checkedChargeCheckList">
	                                                                
	                                                            </tbody>
	                                                        </table>
	                                                    </div>
	                                                 </div>
												</div>
                                                    
                                            </div>
                                            <!-- /.panel-body -->   
                                        </div>
                                        <!-- /.col-lg-12 -->
                                    </div>
                                </div>
                                
                                
                                 <div class="tab-pane fade" id="search">
                                    <div class="panel-body">
                            		<form role="form" style="margin: 0 15px;">
	                                <div class="row search_panel">
	                                    <div class="col-lg-4">
	                                        <div class="form-group">
	                                            <label class="search-label">应收对账单号</label>
	                                            <input type="text" class="form-control search-control orderNo_filter" id="select_orderNo_filter" value="">
	                                        </div>
	                                    </div>
	                                    <div class="col-lg-4">
	                                        <div class="form-group">
	                                            <label class="search-label">状态</label>
	                                            <select id="status_filter" class="form-control search-control status_filter">
	                                                <option value=""></option>
	                                                <option value="新建">新建</option>
	                                                <option value="已确认">已确认</option>
	                                                <option value="开票申请中">开票申请中</option>                                                 
	                                            </select> 
	                                        </div>
	                                    </div>
	                                    <div class="col-lg-4">
                                        	<div class="form-group">
                                            	<label class="search-label">运输单号</label>
                                            	<input type="text" class="form-control search-control transferOrderNo_filter" id="transferOrderNo_filter" value="">
                                        	</div>
                                        </div>
	                                 </div>
                                    <!-- end of col-lg-6-->
                                    <div class="row">
                                   		<div class="col-lg-4">
	                                        <div class="form-group">
	                                            <label class="search-label">客户</label>
	                                            <input type="text" class="form-control search-control customer_filter" id="select_customer_filter" placeholder="请输入或者选择客户">
	                                            <ul id='select_companyList' tabindex="-1" class="pull-right dropdown-menu default" style="top: 42%; left: 32%;"></ul>
	                                        </div>
	                                    </div>
                                    	<div class="col-lg-4">
	                                    	<div class="form-group">
	                                            <label class="search-label">序列号</label>
	                                            <input type="text" class="form-control search-control serialNo_filter" id="serialNo_filter" value="">
	                                        </div>
	                                    </div>
	                                    <div class="col-lg-4">
                                        	<div class="form-group">
                                            	<label class="search-label">签收单号</label>
                                            	<input type="text" class="form-control search-control refNo_filter" id="refNo_filter" value="">
                                        	</div>
                                        </div> 
                                        
                               		</div><!-- end of row-->
                                	<div class="row">
	                                    <div class="col-lg-4">
	                                        <div class="form-group">                                        
	                                            <div id="datetimepickerK" class="input-append date "> 
	                                                <label class="search-label">开始时间</label> 
	                                                <input id="kaishi_filter" class="form-control search-control" type="text">
	                                                <span class="add-on">  
	                                                    <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>  
	                                                </span>  
	                                            </div>
	                                        </div>    
	                                    </div>
                                    <!-- end of col-lg-6-->
	                                    <div class="col-lg-4">
	                                        <div class="form-group">                                                    
	                                            <span id="datetimepickerJ" class="input-append date search-control "> 
	                                                <label class="search-label">结束时间</label> 
	                                                <input id="jieshu_filter" class="form-control search-control " type="text">
	                                                <span class="add-on">  
	                                                    <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>  
	                                                </span>  
	                                            </span>
	                                        </div>
	                                    </div>  
                                </div><!-- end of row-->
                                <div class="row">
                                 	<div class="col-lg-4">
                                		<button type="button" class="btn  btn-primary" id="searchBtn">查询</button>
                                	</div>
                                </div>
                            
                            </form>
                            <br/>
                            <div class="table-responsive">
                                <table class="table table-striped table-bordered table-hover" id="chargeCheckList-table" style="width: 1800px;">
                                    <thead>
                                        <tr>
                                            <th>应收对账单ID</th>
                                            <th>应收对账单号</th>
                                            <th>状态</th>
                                            <th>所属月份</th>
                                            <th>网点</th>
                                            <th>客户名称</th>
                                            <th>供应商名称</th>
                                            <th>合计运费</th>
                                            <th>对账金额</th>
                                            <th>对账后金额</th>
                                            <th>备注</th>
                                            <th>对账人</th>
                                            <th>对账时间</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        
                                    </tbody>
                                </table>
                            </div>
                            
                        </div>
                        <!-- /.panel-body -->
                                
                        
                </div>
                <!-- /.col-lg-12 -->
            </div>  
           <!-- /.row -->

          
        </div>
        </div>
        </div>
    </div>
</div>

<%}%>

<script src="/yh/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/yh/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script>
	<%
		var returnOrderUpdate = shiro.hasPermission("ReturnOrder.update");
		var returnOrderComplete = shiro.hasPermission("ReturnOrder.completed");
		var chargeOrderUpdate = shiro.hasPermission("ChargeCheckOrder.update");
		var chargeOrderAffirm = shiro.hasPermission("ChargeCheckOrder.affirm");
	%>
	var Return = {};
	var ChargeCheck={};
	Return.isUpdate = ${returnOrderUpdate};
	Return.isComplete = ${returnOrderComplete};
	ChargeCheck.isUpdate = ${chargeOrderUpdate};
	ChargeCheck.isAffirm = ${chargeOrderAffirm};
</script>
<script src="/yh/js/arap/ChargeCheckOrder/list.js"></script>
<script src="/yh/js/arap/ChargeCheckOrder/createList.js"></script>
<script src="/yh/js/plugins/sco/js/sco.message.js"></script>
<script src="/yh/js/bootstrap-datetimepicker.min.js"></script>
<script src="/yh/js/bootstrap-datetimepicker.zh-CN.js"></script>

