<%layout("/yh/layout.html"){%>
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.0/themes/smoothness/jquery-ui.css">
 <div id="page-wrapper">
  
    <div class="row">
      <div class="col-lg-12 panel-body">
      <% if(saveOK!''==true){%>
        <div class="alert alert-success alert-dismissable">
        <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
        保存成功。
      </div>
      <%}%>
      <h1 class="page-header">创建配送单</h1>
      
      
    </div>
    
  </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-body">
	            <!-- Nav tabs -->
	            <ul class="nav nav-tabs">
	                <li class="active"><a href="#basic" data-toggle="tab">基本信息</a>
	                </li>
	                <li class=""><a href="#cargos" data-toggle="tab">货品明细</a>
	                </li>
	                <li class=""><a href="#milestone" data-toggle="tab" id="transferOrderMilestoneList">运输里程碑</a>
                     </li>
                     <li class=""><a href="#arap" data-toggle="tab">应收应付</a>
                     </li>
	            </ul>
	            <div class="tab-content">
                                <div class="tab-pane fade active in" id="basic">
                                <div class="row">
                                <form action="" id="deliveryForm">
                                	<div class="col-lg-6">
                                	 <input id="deliverystatus" name="deliverystatus" type="hidden" value="${deliveryId.status!''}">
		                                    <input id="tranferid" name="tranferid" type="hidden" value="${transferId!''}">
		                                    <!-- 运输单ID -->
		                                    <input id = "localArr" type="hidden" name="localArr" value="${localArr!''}"/>
		                                    <!-- 运输单货品明细ID -->
		                                    <input id = "localArr2" type="hidden" name="localArr2" value="${localArr2!''}"/>
		                                    <!-- 运输单单号 -->
		                                    <input id = "localArr3" type="hidden" name="localArr3" value="${localArr3!''}"/>
		                                    <!-- <input id = "item_id" name="item_id" type="hidden" value="${itemsIds.id!''}"/> -->
                                    		<input id="delivery_id" type="hidden" name="delivery_id" value="${deliveryId.id!''}"/>
		                                 
		                                 <div class="form-group">
		                                    <h3> <label>客户信息</label></h3>
			                                   <input id="customer_id" name="customer_id" type="hidden" value="${customer.customerId!''}">
							                      <div class="form-group">
							                          <label>联系人：</label> ${customer.contact_person!''}
							                      </div>
							                      <div class="form-group">
							                          <label>公司：</label> ${customer.company_name!''}
							                      </div>
							                      <div class="form-group">
							                          <label>地址:</label> ${customer.address!''}
							                      </div>
							                      <div class="form-group">
							                          <label>联系方式：</label> ${customer.mobile!''}
							                      </div>
					                    </div>
					                     <div class="panel-body"> </div>
					                     
						                  <h3> <label >供应商信息</label></h3>
	                                        <div class="form-group">
	                                            <label>供应商名称</label>
	                                            <input id="cid" name="cid" type="hidden" value="${spContact.spId!''}">
	                                            <input id="spMessage" class="form-control" placeholder="选择供应商" type="text" name="spMessage" value="${spContact.company_name!''}"/>
	                                           
	                                            <ul id='spList' class="pull-right dropdown-menu default dropdown-scroll" tabindex="-1" style="top: 35%; left: 2%;">
												</ul>
												
	                                        </div>
	                                        
	                                        <div id= "textDiv"  class="form-group">
	                                        	<div class="form-group">
							                          <label>联系人：</label>  <lable id="a1">${spContact.contact_person!''}</lable>
							                      </div>
							                      <div class="form-group">
							                          <label>公司：</label> 	<lable id="a2">${spContact.company_name!''}</lable>
							                      </div>
							                      <div class="form-group">
							                          <label>地址:</label> 	<lable id="a3">${spContact.address!''}</lable>
							                      </div>
							                      <div class="form-group">
							                          <label>联系方式：</label> 	<lable id="a4">${spContact.mobile!''}</lable>
							                      </div> </div>
							                      <div class="form-group">     
	                                        	
	                                        </div>
							                       <div class="form-group" >
	                                            	<input id="locationTo" type="hidden" name="route_to" value="${deliveryId.route_to!''}">
	                                           		<label>目的地城市</label>
			                                   		 <div class="form-control" style="padding: 0px 0px;box-shadow:none;border:none;height:35px;">
			                                        <label>省</label>
			                                        <input id="hideProvinceTo" type="hidden" value="${locationTo.province!''}"/>
			                                        <select id="mbProvinceTo" class="valid" name="mbProvinceTo"></select>
			                                        <label>市</label>
			                                        <input id="hideCityTo" type="hidden" value="${locationTo.city!''}"/>
			                                        <select  id="cmbCityTo"  class="valid" name="cmbCityTo"></select>
			                                        <label>区(县)</label>
			                                        <input id="hideDistrictTo" type="hidden" value="${locationTo.district!''}" />
			                                        <select  id="cmbAreaTo" class="valid" name="cmbAreaTo"></select>
			                                    	</div>
		                                   		 </div>
		                                   		 <div class="form-group">
                                                    <label><h3>计费方式</h3></label>
                                                    <input id="chargeTypeRadio" type="hidden" value="${deliveryId.priceType!''}"/>
                                                    <label class="radio-inline">
                                                    	<input type="radio" name="chargeType" id="chargeType1" value="perUnit" checked="">计件
                                                    </label>
	                                                <label class="radio-inline">
	                                                    <input type="radio" name="chargeType" id="chargeType2" value="perCar">整车
	                                                </label>  
	                                                <label class="radio-inline">
	                                                    <input type="radio" name="chargeType" id="chargeType3" value="perCargo">零担
	                                                </label> 
                                             	</div>
                                             	<div class="form-group">
		                                        	<label>配送仓库：</label><lable>${warehouse.WAREHOUSE_NAME!''}</lable>
		                                        	<input type="hidden" id="warehouse_id" name="warehouse_id" value ="${warehouse.id!''}">
		                                        </div>
		                                        <div class="form-group">
		                                            <%
		                                            	var cargoNaturName="ATM";
		                                            	if(cargoNature=="cargo")
		                                            		cargoNaturName="普通货品";
		                                            %>
		                                        	<label>货品属性：</label><lable>${cargoNaturName}</lable>
		                                        	<input type="hidden" id="cargoNature" name="cargoNature" value ="${cargoNature!''}">
		                                        </div>
	                                    </div>
	                                    
	                                 	<div class="col-lg-6">
                                 			<div>
                                 			<div id="tranferdiv">
			                                    <h3> <label >运输单信息</label></h3>
			                                    <input id="transferstatus" name="transferstatus" type="hidden" value="${deliveryOrder.status!''}">
			                                   	<input id="transfer_id" name="transfer_id" type="hidden" value="${deliveryOrder.id!''}">
						                      <div class="form-group">
						                          <label>运输单号：</label> ${deliveryOrder.order_no!''}
						                      </div>
						                      <div class="form-group">
						                          <label>货品属性：</label> ${deliveryOrder.cargo_nature!''}
						                      </div>
						                      <div class="form-group">
						                          <label>提货方式:</label> ${deliveryOrder.pickup_mode!''}
						                      </div>
						                      <div class="form-group">
						                          <label>到达方式：</label> ${deliveryOrder. arrival_mode!''}
						                      </div> 
						                      
						                      <div class="panel-body"> </div>
						                       
						                      </div>
						                      
						                      <div>   
		                                        <h3><label >收货人信息</label></h3>
		                                        <div class="form-group">
		                                        	<input name="notify_id" type="hidden" value="${notifyParty.pid!''}">
		                                        	<input name="contact_id" type="hidden" value="${notifyParty.contactId!''}">
		                                            <label>收货人公司名称</label>
		                                            <input name="notify_company_name" class="form-control" placeholder="请输入公司名称" value="${notifyParty.company_name!''}">
		                                        </div>
		                                        <div class="form-group">
		                                            <label>收货地址</label>
		                                            <input name="notify_address" class="form-control" placeholder="请输入收货地址" value="${notifyParty.address!''}">
		                                        </div>
		                                        <div class="form-group">
		                                            <label>联系人</label>
		                                            <input name="notify_contact_person" class="form-control" placeholder="请输入联系人" value="${notifyParty.contact_person!''}">
		                                        </div>
		                                        <div class="form-group">
		                                            <label>电话</label>
		                                            <input name="notify_phone" class="form-control" placeholder="请输入电话" value="${notifyParty.mobile!''}">
		                                        </div>  
	                                      </div> 
					                      </div>
	                                     </div> 
					                </form>
                                <!-- /.col-lg-6 (nested) -->
                                
                                <!-- /.col-lg-6 (nested) -->
                            </div>
                  </div>
                  <div class="tab-pane fade" id="cargos">
               		<div class="panel-body" id="cargotable">                                                                            
	                  <div class="table-responsive">
	                                <table class="table table-striped table-bordered table-hover" id="eeda-table">
	                                    <thead>
	                                        <tr>
	                                        	<th>运输单</th>
	                                        	<th>客户</th>
	                                            <th>型号</th>
	                                            <th>序列号</th>
	                                            <th>名称</th>
	                                            <th>数量</th>
	                                            <th>体积</th>
	                                            <th>重量(KG)</th>
	                                        </tr>
	                                    </thead>
	                                    <tbody>
	                                    </tbody>
	                                </table>
	                            </div>
	                   <!-- /.table-responsive -->
	               </div>
               <!-- /.panel-body -->
               <div class="panel-body" id="cargotable2">                                                                            
	                  <div class="table-responsive">
	                                <table class="table table-striped table-bordered table-hover" id="cargo-table">
	                                    <thead>
	                                        <tr>
	                                            <th>型号</th>
	                                            <th>序列号</th>
	                                            <th>名称</th>
	                                            <th>体积</th>
	                                            <th>重量(KG)</th>
	                                            <th>运输单</th>
	                                        	<th>客户</th>
	                                        </tr>
	                                    </thead>
	                                    <tbody>
	                                    </tbody>
	                                </table>
	                            </div>
	                   <!-- /.table-responsive -->
	               </div>
               <!-- /.panel-body -->
           </div>
           
           
           							<!-- 模态框 -->
									<div class="modal fade" id="deliveryOrderMilestone" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
									  <div class="modal-dialog">
									    <div class="modal-content">
									      <div class="modal-header">
									        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
									        <h4 class="modal-title" id="myModalLabel">新里程碑</h4>
									      </div>
									      <div class="modal-body">
									      	<form id="transferOrderMilestoneForm" action="">
									      		<input id="transfer_milestone_delivery_id" type="text" name="delivery_id" />
												<div class="form-group ">
												<label class="control-label" for="inputSuccess">状态(不填默认为"在途")</label> <input
													id="status" class="form-control" type="text"
													name="status">
												</div>
												<div class="form-group ">
												<label class="control-label" for="inputSuccess">地点</label> <input
													id="location" class="form-control" type="text"
													name="location">
												</div>
										      </div>
										      <div class="modal-footer">
										        <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
										        <button id="deliveryOrderMilestoneFormBtn" type="button" class="btn btn-primary">保存</button>
										      </div>
											</form>
									    </div><!-- /.modal-content -->
									  </div><!-- /.modal-dialog -->
									</div><!-- /.modal -->
           
            		<div class="tab-pane fade" id="milestone">
                                    <div class="panel-body">
                                        <div class="table-responsive">                                        
			                            <button class="btn btn-primary" data-toggle="modal" data-target="#deliveryOrderMilestone">
										  新里程碑
										</button>
                                            <table class="table table-striped table-bordered table-hover">
                                                <thead>
                                                    <tr>
                                                        <th>状态</th>
                                                        <th>地点</th>
                                                        <th>更新用户</th>
                                                        <th>更新时间</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="transferOrderMilestoneTbody" >
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- /.table-responsive -->
                                    </div>
                                    <!-- /.panel-body -->
                                </div>
           			<div class="tab-pane fade" id="arap">
                                    <h2>应收</h2>
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover" id ="table_fin">
                                                <thead>
                                                    <tr>
                                                        <th>费用条目</th>
                                                        <th>金额</th>
                                                        <th>结算状态</th>
                                                        <th>运输单</th>
                                                        <th>备注</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                   
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- /.table-responsive -->
                                    </div>
                                    <!-- /.panel-body -->
                                    
                                    <hr>
                                    <h2>应付</h2>
									 <button class="btn btn-primary" id="addrow"> 添加应付</button>
                                    <div class="panel-body">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-bordered table-hover"  id ="table_fin2">
                                                <thead>
                                                    <tr>
                                                       <th>费用条目</th>
                                                        <th>金额</th>
                                                        <th>结算状态</th>
                                                        <th>运输单</th>
                                                        <th>备注</th>
                                                        <th></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    
                                                </tbody>
                                            </table>
                                        </div>
                                        <!-- /.table-responsive -->
                                    </div>
                                    <!-- /.panel-body -->
                                </div>
           		<div class=".tooltip-demo">
                    <hr/>
                    <a style="display:none" id ="style"><i class='fa fa-check'></i></a>
                    <button id="saveBtn" type="button" class="btn btn-default" data-toggle="tooltip" title="" data-original-title="Default tooltip">保存</button>                                    
                    <button id="ConfirmationBtn" type="button" disabled="true" class="btn btn-default " data-toggle="tooltip" title="" data-original-title="Default tooltip">发车确认</button>
                    <!-- <button id="receiptBtn" type="button" disabled="true"  class="btn btn-default" data-toggle="tooltip" title="" data-original-title="Default tooltip">签收完成</button> -->
                    <a class="btn btn-default" href="/yh/delivery">返回</a>
                </div>
	        </div>
        </div>
      </div>
      
    </div>
    
  </div> 
  
<%}%>
<!-- Page-Level Plugin Scripts - Tables -->
<script src="http://code.jquery.com/ui/1.11.0/jquery-ui.js"></script>
<script src="/yh/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/yh/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script src="/yh/js/plugins/dataTables/jquery.dataTables.editable.js" type="text/javascript"></script>
<script src="/yh/js/plugins/dataTables/jquery.jeditable.js" type="text/javascript"></script>
<!-- 引入校验的js 文件及其 中文 文件-->
<script src="/yh/js/jquery.validate.min.js"></script>
<script src="/yh/js/jvalidate.messages_cn.js"></script>
<script src="/yh/js/delivery/delivery.js"></script>
