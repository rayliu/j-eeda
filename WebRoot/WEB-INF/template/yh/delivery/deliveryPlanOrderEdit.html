<%layout("/yh/layout.html"){%>

	<link href="/yh/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
	<link rel="stylesheet" href="/yh/css/ui/jquery-ui.css">
     <link href="/yh/js/plugins/sco/css/sco.message.css" rel="stylesheet">  
        <div id="page-wrapper">
            <div class="row">
           
                <div class="col-lg-12">
                    <div class="btn-header" style="font-size: 32px">配送排车单</div>                  
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        
                        <!-- /.panel-heading -->
                        <div class="panel-body" id="total">
                  
                            <!-- Nav tabs -->
                            <ul class="nav nav-tabs">
                                <li class="active"><a href="#basic" data-toggle="tab" id = "chargeCheckOrderbasic">基本信息</a>
                                </li>
                                <li class=""><a href="#line" data-toggle="tab" id="addressList">线路</a>
                                </li>
                                <li class=""><a href="#cargos" data-toggle="tab" id="itemList">货品信息</a>
                                </li>
                                 <li class=""><a href="#milestone" data-toggle="tab" id="milestoneList">运输里程碑</a>
                                </li>
                            </ul>

                            <!-- Tab panes -->
                            <div class="tab-content">
                                <div class="tab-pane fade active in" id="basic">
                                <div class="row">
                                   <form id="deliveryPlanOrderForm" method="post" action="">
		                                <div class="col-lg-6">
                                        	<input type="hidden" id="deliveryOrderIds" name="deliveryOrderIds" value="${deliveryOrderIds!''}">
                                        	<input type="hidden" id="deliveryPlanOrderId" name="deliveryPlanOrderId" value="${deliveryPlanOrder.id!''}">
                                        	<input type="hidden" id="spId" name="spId" value="${spId!''}">
                                        	<input type="hidden" id="carInfoId" name="carInfoId" value="${deliveryPlanOrder.carinfo_id!''}">
                                        	<h3>供应商信息</h3>
                                            <div class="form-group">
                                                <input id="spMessage" class="form-control" placeholder="选择供应商" type="text" name="spMessage"  value="${spName!''}" disabled="true"/>
                                            </div>
	                                 		<h3>车辆信息</h3>                                         
	                                        <div class="form-group">
	                                            <label>车牌</label>
	                                            <div class="form-group">											
											        <input type="text" name="car_no" class="form-control" id="car_no" value="${deliveryPlanOrder.car_no!''}">
											        <ul style="top: 17%; left: 2%;" tabindex="-1" class="pull-right dropdown-menu default" id="carNoList">
													</ul>
											    </div>
	                                        </div>
	                                        <div class="form-group">
												<label>司机</label>
											    <div class="form-group">													    								
											        <input type="text" name="driver" class="form-control" id="driver" value="${deliveryPlanOrder.driver!''}">
											        <ul style="top: 17%; left: 2%;" tabindex="-1" class="pull-right dropdown-menu default" id="driverList">
													</ul>
											    </div>
		                                        <div class="form-group">
			                                        <label>电话</label>
			                                        <input type="text" class="form-control" id="phone" name="phone" value="${deliveryPlanOrder.phone!''}">
		                                        </div>
		                                    </div>
											<div class="row">
			                                    <div class="col-lg-6">
			                                        <div class="form-group">                                        
			                                            <div id="datetimepicker" class="input-append date "> 
			                                                <label class="search-label">出车时间</label> 
			                                                <input id="turnout_time" class="form-control search-control  beginTime_filter" type="text" name="turnout_time" value="${deliveryPlanOrder.turnout_time!''}">
			                                                <span class="add-on">  
			                                                    <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>  
			                                                </span>  
			                                            </div>
			                                        </div>    
			                                    </div>
			                                    <!-- end of col-lg-6-->
			                                    <div class="col-lg-6">
			                                        <div class="form-group">                                                    
			                                            <span id="datetimepicker2" class="input-append date search-control "> 
			                                                <label class="search-label">返回时间</label> 
			                                                <input id="return_time" class="form-control search-control endTime_filter" type="text" name="return_time" value="${deliveryPlanOrder.return_time!''}">
			                                                <span class="add-on">  
			                                                    <i class="fa fa-calendar" data-time-icon="icon-time" data-date-icon="icon-calendar"></i>  
			                                                </span>  
			                                            </span>
			                                        </div>
			                                    </div>
			                                </div>
                                       </div> 
	                                   <div class="col-lg-6">
	                                  		<h3>排车信息</h3>                                           
                                            <div class="form-group">
                                                <label>排车单号：</label> <strong id="showOrderNo">${deliveryPlanOrder.order_no!''} </strong>
                                            </div>
                                            <div class="form-group">
                                                <label>单据状态：</label> <strong id="showStatus">${deliveryPlanOrder.status!''} </strong>
                                            </div>
                                            <div class="form-group">
                                            	<label>创建人：</label> <strong 	id="showCreateName">${user.user_name!''} </strong>                                      
                                        	</div>
		                                                                                                                         
											<div class="form-group">
	                                            <label>备注</label>
	                                            <textarea class="form-control" rows="8" id="remark" name="remark">${deliveryPlanOrder.remark!''}</textarea>
	                                        </div> 
	                                   </div>
                                    </div>   
                                </form>
                            </div>
                            
                            <div class="tab-pane fade" id="line">  
                            	<div class="panel-body">
                                	<!-- <button class="btn  btn-primary" data-toggle="modal" data-target="#addExternalTransferOrder" data-backdrop="static">
									  添加额外配送单
									</button> -->
                               		<div class="table-responsive"> 
                                        <!-- <form id="pickupAddressForm" action="">
                                            <input type="hidden" id="addressPickupOrderId" value="${pickupOrder.id!''}" name="pickupOrderId"> -->
                                            <table class="table table-striped table-bordered table-hover" id="routeTbody">
                                                <thead>
                                                    <tr>
                                                        <th>配送单号</th>
                                                        <th>客户</th>
                                                        <th>创建时间</th>
                                                        <th>备注</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    
                                                </tbody>
                                            </table>
                                        <!-- </form> -->
                                    </div>
                                </div>
                            </div>
                            
							<!-- 模态框 -->
							<div class="modal fade" id="addExternalTransferOrder" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							  <div class="modal-dialog">
							    <div class="modal-content">
							      <div class="modal-header">
							        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							        <h4 class="modal-title" id="myModalLabel">添加额外运输单</h4>
							      </div>
							      <div class="modal-body">
							      	<form id="addExternalTransferOrderForm" action="">
							      		<input type="hidden" name="transferOrderIds" id="transferOrderIds"/>
							      		<input type="hidden" name="pickupOrderId" id="addExternalPickupOrderId"/>
							      		<div class="table-responsive">
			                                <table class="table table-striped table-bordered table-hover" id="external-table">
			                                    <thead>
			                                        <tr>
			                                            <th></th>
			                                            <th>运输单号</th>
			                                            <th>订单类型</th>
			                                            <th>货品</th>
			                                            <th>提货地点</th>
			                                            <th>提货方式</th>
			                                            <th>状态</th>                                         
			                                            <th>客户</th>                                         
			                                            <th>始发城市</th>                                         
			                                            <th>目的地城市</th>                                         
			                                            <th>创建时间</th>                                         
			                                         </tr>
			                                    </thead>
			                                    <tbody>                                        
			                                    </tbody>
			                                </table>
			                            </div>
								      <div class="modal-footer">
								        <button type="button" class="btn  btn-primary" data-dismiss="modal">取消</button>
								        <button id="addExternalTransferOrderFormBtn" type="button" class="btn  btn-primary">保存</button>
								      </div>
									</form>
								  </div>
							    </div><!-- /.modal-content -->
							  </div><!-- /.modal-dialog -->
							</div><!-- /.modal -->
									
                                <div class="tab-pane fade" id="cargos">  
                                     <div class="panel-body" style="" id="ATMitem">
                                     <div class="table-responsive">                                        
		                                <table class="table table-striped table-bordered table-hover" id="deliveryItemTboby">                              
		                                <thead>
		                                        <tr>
		                                        	<th>客户</th> 
		                                        	<th>运输单号</th> 
		                                         	<th>型号</th> 
		                                            <th>名称</th>
		                                            <th>数量</th>                                   
		                                            <th>体积</th> 
		                                            <th>重量</th> 
		                                            <th>备注</th>                                          
		                                            <!-- <th>操作</th> -->
		                                        </tr>
		                                    </thead>                               
		                                    <tbody>                                                                                                   
		                                    </tbody>
		                                </table>                                
                                     </div>
                                     
                                     <!-- /.table-responsive -->
                                     <div style="display: none" id="transferOrderItemDateil">
                                         <div class="btn-header">单品列表</div>
										 <input id="item_id" value=0 type="hidden" >
                                         <div class="table-responsive">                                        
                                         <table id="pickupDetail-table" class="table table-striped table-bordered table-hover dataTable">
                                              <thead>
                                                  <tr role="row">
                                                  <th class="sorting"></th>
                                                  <th class="sorting">名称</th>
                                                  <th class="sorting">型号</th>
                                                  <th class="sorting_asc">序列号</th>
                                                  <th class="sorting">体积</th>
                                                  <th class="sorting">重量</th>
                                                  <th class="sorting">备注</th>	                                                  
                                                  </tr>
                                              </thead>
                                           </table>
                                        </div>
                                        <div class="form-group">
                                        	<a id="styleSave" style="display:none"><i class="fa fa-check"></i></a>
                                        </div>
                                    </div>
                                 </div>                							
                               </div>
                                
                                <!-- 模态框 -->
                                <div class="tab-pane fade" id="milestone">
                                    <div class="panel-body">
                                        <div class="table-responsive">                                        
			                            <button class="btn  btn-primary" data-toggle="modal" data-target="#transferOrderMilestone">
										  新里程碑
										</button>
										<div class="panel-body">
	                                        <table class="table table-striped table-bordered table-hover"  id="milestoneTbody" >
	                                            <thead>
	                                                <tr>
	                                                    <th>状态</th>
	                                                    <th>地点</th>
	                                                    <th>更新用户</th>
	                                                    <th>更新时间</th>
	                                                </tr>
	                                            </thead>
	                                            <tbody>
	                                            </tbody>
	                                        </table>
                                        </div>
                                    </div>
                                    <!-- /.table-responsive -->
                               </div>
                               <!-- /.panel-body -->
                           </div>
                           
                           	<!-- 模态框 -->
							<div class="modal fade" id="transferOrderMilestone" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
							  <div class="modal-dialog">
							    <div class="modal-content">
							      <div class="modal-header">
							        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
							        <h4 class="modal-title" id="myModalLabel">新里程碑</h4>
							      </div>
							      <div class="modal-body">
							      	<form id="deliveryPlanOrderMilestoneForm" action="">
										<div class="form-group ">
											<label class="control-label" for="inputSuccess">状态(不填默认为"在途")</label> 
											<input id="status" class="form-control" type="text" name="status">
										</div>
										<div class="form-group ">
											<label class="control-label" for="inputSuccess">地点</label> 
											<input id="location" class="form-control" type="text" name="location">
										</div>
									</form>
							      </div>
							      <div class="modal-footer">
							        <button type="button" class="btn  btn-primary" data-dismiss="modal">取消</button>
							        <button id="saveDeliveryPlanOrderMilestoneBtn" type="button" class="btn  btn-primary">保存</button>
							      </div>
									
							    </div><!-- /.modal-content -->
							  </div><!-- /.modal-dialog -->
							</div><!-- /.modal -->
								
                        </div>
                        <!-- /.panel-body --> 
                        <div class=".tooltip-demo">
                            <hr/>
                        	<a style="display:none" id ="style"><i class='fa fa-check'></i></a>                            
		               		<button id="saveDeliveryPlanOrderBtn" type="button" class="btn  btn-primary" data-toggle="tooltip" title="" data-original-title="Default tooltip">保存</button>
		               		<a class="btn  btn-primary" href="/deliveryPlanOrder">返回</a>
                        </div>                       
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
			</div> 
            </div>
        </div>
        <!-- /#page-wrapper -->

<%}%>
<script src="/yh/css/ui/jquery-ui.js"></script>
<script src="/yh/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/yh/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script src="/yh/js/plugins/dataTables/jquery.dataTables.editable.js" type="text/javascript"></script>
<script src="/yh/js/plugins/dataTables/jquery.jeditable.js" type="text/javascript"></script>
<!-- 引入校验的js 文件及其 中文 文件-->
<script src="/yh/js/jquery.validate.min.js"></script>
<script src="/yh/js/jvalidate.messages_cn.js"></script>
<script src="/yh/js/plugins/sco/js/sco.message.js"></script>
<script src="/yh/js/bootstrap-datetimepicker.min.js"></script>
<script src="/yh/js/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="/yh/js/delivery/planEdit.js"></script>

