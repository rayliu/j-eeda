<%layout("/yh/layout.html"){%>
<link href="/yh/js/plugins/sco/css/sco.message.css" rel="stylesheet">
	<div id="page-wrapper">
		<div class="row">
             <div class="col-lg-12">
              	<h1 class="page-header">
              		<h1 class="page-header">
                        	
                    </h1>
				</h1>
                 <div class="panel panel-default">
                   <div class="panel-heading">
                 		用户信息
            		</div>
            		<div class="panel-body">
            			<div class="row-fluid">
            				<form lass="form-horizontal" id='leadsForm' name="leadsForm" action="/loginUser/saveUser" method="post">
						<input id="userId" name="userId" type="hidden" value="${lu.id!''}">
						<div class="form-group ">
			                 <label class="control-label">用户名(必填)</label>
			                 <input id="username" name="username" type="text" class="form-control" value="${lu.user_name!''}">
			             </div>
			             <div class="form-group ">
			                 <label class="control-label">密码(必填)</label>
			                 <input type="password" class="form-control" id="password" name="password" value="${lu.password!''}">
			             </div>
			              <div class="form-group ">
			                 <label class="control-label">再次输入密码(必填)</label>
			                 <input type="password" class="form-control" id="confirm_password" name="confirm_password" value="${lu.password!''}">
			             </div>
			              <div class="form-group">
			                 <label class="control-label">密码提示</label>
			                 <input type="text" class="form-control" id="pw_hint" name="pw_hint" value="${lu.password_hint!''}">
			             </div>
			             <div class="form-group ">
                             <input id="hideOfficeId" type="hidden" value="${lu.office_id!''}" />    
							 <label class="control-label" for="inputSuccess">请选择网点</label>
                             <select id="officeSelect" class="form-control" name="officeSelect"></select>  
						 </div>
                                            
			             	<button type="submit" class="btn btn-default">保存</button>
				            <a class="btn btn-default" href="/loginUser">返回</a>
			         </form>
            			</div>
            		</div>
					
							
				</div>
			</div>
		</div>
	</div>
<%}%>
<!-- 引入校验的js 文件及其 中文 文件-->
<script src="/yh/js/jquery.validate.min.js"></script>
<script src="/yh/js/jvalidate.messages_cn.js"></script>

<script>
	$(document).ready(function() {
		jQuery.validator.addMethod("stringCheck", function(value, element) {
			return this.optional(element) || ( /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/).test(value);
			}, "登陆名格式不正确");

    $('#menu_profile').addClass('active').find('ul').addClass('in');
        $('#leadsForm').validate({
            rules: {
            	username: {
                required: true,
                stringCheck:true,
                minlength: 5
				},
              password:{//form 中 name为必填
                required: true,
                minlength: 5
              },
              confirm_password: { 
            	  required: true, 
            	  minlength: 5, 
            	  equalTo: "#password" 
            	  } 
             },
            highlight: function(element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            success: function(element) {
                element.addClass('valid').closest('.form-group').removeClass('has-error').addClass('has-success');
            }
        });
        

	   	 // 获取所有城市
	   	 $.post('/transferOrder/searchAllOffice',function(data){
	   		 if(data.length > 0){
	   			 var officeSelect = $("#officeSelect");
	   			 officeSelect.empty();
	   			 var hideOfficeId = $("#hideOfficeId").val();
	   			 for(var i=0; i<data.length; i++){
	   				 if(i == 0){
	   					 officeSelect.append("<option ></option>");
	   				 }else{
	   					 if(data[i].ID == hideOfficeId){
	   						 officeSelect.append("<option value='"+data[i].ID+"' selected='selected'>"+data[i].OFFICE_NAME+"</option>");
	   					 }else{
	   						 officeSelect.append("<option value='"+data[i].ID+"'>"+data[i].OFFICE_NAME+"</option>");					 
	   					 }
	   				 }
	   			 }
	   		 }
	   	 },'json');
    });
</script>
