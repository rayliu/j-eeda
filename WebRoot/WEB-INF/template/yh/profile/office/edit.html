<%layout("/yh/layout.html"){%>

	<div id="page-wrapper">
		<div class="row">
             <div class="col-lg-12">
              	<h1 class="page-header">
              		<h1 class="page-header">
                        	
                    </h1>
				</h1>
                 <div class="panel panel-default">
                   <div class="panel-heading">
                 		分公司信息
            		</div>
            		<div class="panel-body">
            			<div class="row-fluid">
            				<form lass="form-horizontal" id='leadsForm' name="leadsForm" action="/office/saveOffice" method="post">
						<input id="officeId" name="officeId" type="hidden" value="${ul.id!''}">
						<div class="col-lg-6">
                        	<fieldset>
							<div class="form-group ">
				                 <label class="control-label">分公司代码(必填)</label>
				                 <input id="office_code" name="office_code" type="text" class="form-control" value="${ul.office_code!''}">
				             </div>
			               </fieldset>
                         </div>
                         <div class="col-lg-6">
                        	<fieldset>
					             <div class="form-group ">
					                 <label class="control-label">分公司名称(必填)</label>
					                 <input type="text" class="form-control" id="office_name" name="office_name" value="${ul.office_name!''}">
					             </div>
				            </fieldset>
                         </div>
                         <div class="col-lg-6">
                        	<fieldset>
					             <div class="form-group ">
					                 <label class="control-label">联系人(必填)</label>
					                 <input type="text" class="form-control" id="office_person" name="office_person" value="${ul.office_person!''}">
					             </div>
				            </fieldset>
                         </div>
                         <div class="col-lg-6">
                        	<fieldset>
				              <div class="form-group">
				                 <label class="control-label">联系方式(必填)</label>
				                 <input type="text" class="form-control" id="phone" name="phone" value="${ul.phone!''}">
				             </div>
			              </fieldset>
                         </div>
                         <div class="col-lg-6">
                        	<fieldset>
					             <div class="form-group ">
					                 <label class="control-label">地址(必填)</label>
					                 <input type="text" class="form-control" id="address" name="address" value="${ul.address!''}">
					             </div>
				            </fieldset>
                         </div>
                         <div class="col-lg-6">
                        	<fieldset>
					             <div class="form-group ">
					                 <label class="control-label">email(必填)</label>
					                 <input type="text" class="form-control" id="email" name="email" value="${ul.email!''}">
					             </div>
				            </fieldset>
                         </div>
                         <div class="col-lg-6">
                        	<fieldset>
					             <div class="form-group ">
					                 <label class="control-label">公司类别</label>
					                
					                <select class="form-control" id="type" name="type" value="">
					                 	<option></option>
					                 	<!-- <option>自营</option>
					                 	<option>控股</option>
					                 	<option>合作</option> -->
					                 	<option>分公司</option>
					                 	<option>合作公司</option>
					                 	<option>配送中心RDC</option>
					                 </select>
					             </div>
				            </fieldset>
                         </div>
                        <div class="col-lg-6">
                        	<fieldset>
					             <div class="form-group ">
					                 <label class="control-label">公司简介(必填)</label>
					                 <input type="text" class="form-control" id="company_intro" name="company_intro" value="${ul.company_intro!''}">
					             </div>
				            </fieldset>
                         </div>
                         <div class="col-lg-7">
                         	
			             	<button type="submit" class="btn btn-default">保存</button>
			             	<a class="btn btn-default" href="/office">返回</a>
			             	
			             </div>
			         </form>
            			</div>
            		</div>
				</div>
				
				<div class="panel panel-default">
                   	<div class="panel-heading">
                 		分公司仓库列表
            		</div>
            		<div class="panel-body">
            			<div class="row-fluid">                                       
                          		<table class="table table-striped table-bordered table-hover" id="eeda-table">
                               	<thead>
                                   	<tr>
                                       <th>仓库名称</th>
                                       <th>联系人</th>
                                       <th>电话</th>
                                       <th>仓库所在地</th>
                                       <th>详细地址</th>
                                       <th>仓库描述</th>
                                   	</tr>
                               	</thead>
                               	<tbody id="transferOrderMilestoneTbody" >
                               	</tbody>
                           	</table>
                      	</div>
                      	<!-- /.panel-body -->
                  	</div>
				</div>
				
			</div>
		</div>
	</div>
	
				
	
<%}%>
<!-- 引入校验的js 文件及其 中文 文件-->
<script src="/yh/js/jquery.validate.min.js"></script>
<script src="/yh/js/jvalidate.messages_cn.js"></script>
<script src="/yh/js/plugins/dataTables/jquery.dataTables.js"></script>
<script src="/yh/js/plugins/dataTables/dataTables.bootstrap.js"></script>
<script>
	$(document).ready(function() {
		var type = '${ul.type!''}';
		$('#type').val(type);
    	$('#menu_profile').addClass('active').find('ul').addClass('in');
        $('#leadsForm').validate({
            rules: {
            	office_code: {
                required: true
              },
              office_name:{//form 中 name为必填
                required: true
              },
              contact_id:{//form 中 name为必填
                  required: true
                }
            },
            highlight: function(element) {
                $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
            },
            success: function(element) {
                element.addClass('valid').closest('.form-group').removeClass('has-error').addClass('has-success');
            }
        });
        
        var warehouseTab = $('#eeda-table').dataTable({
        	"bFilter": false, //不需要默认的搜索框
        	"bSort": false, // 不要排序
        	"sDom": "<'row-fluid'<'span6'l><'span6'f>r><'datatable-scroll't><'row-fluid'<'span12'i><'span12 center'p>>",
        	"iDisplayLength": 20,
        	"bServerSide": true,
        	"oLanguage": {
                "sUrl": "/eeda/dataTables.ch.txt"
            },
            "sAjaxSource": "/office/findOfficeWarehouse/"+$("#officeId").val(),
            "aoColumns": [   
                {"mDataProp":"WAREHOUSE_NAME"}, 
                {"mDataProp":"CONTACT_PERSON"},        	
                {"mDataProp":"PHONE"},
                {"mDataProp":"DNAME"},       	
                {"mDataProp":"WAREHOUSE_ADDRESS"},        	
                {"mDataProp":"WAREHOUSE_DESC"}
            ],      
        });	
        
    }); 
</script>
