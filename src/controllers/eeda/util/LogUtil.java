package controllers.eeda.util;import java.util.Date;import java.util.List;import org.apache.shiro.SecurityUtils;import org.apache.shiro.subject.Subject;import models.UserLogin;import com.jfinal.core.Controller;import com.jfinal.log.Logger;import com.jfinal.plugin.activerecord.Db;import com.jfinal.plugin.activerecord.Record;public class LogUtil {    private static Logger logger = Logger.getLogger(LogUtil.class);        //撤销操作进行记录    public static void log_Record(String from_id) {    	StackTraceElement[] temp=Thread.currentThread().getStackTrace();		StackTraceElement a=(StackTraceElement)temp[2];		String from_method_name = a.getClassName()+"."+a.getMethodName();    	Subject currentUser = SecurityUtils.getSubject();    	String name = (String) currentUser.getPrincipal();		List<UserLogin> users = UserLogin.dao				.find("select * from user_login where user_name='" + name + "'");		Record order =new Record();		order.set("from_method_name", from_method_name);		order.set("from_id", from_id);		order.set("creator", users.get(0).getLong("id"));		order.set("create_time", new Date());		Db.save("log_record", order);        logger.debug("【操作记录】所在方法：'"+from_method_name+"'，ID："+from_id+"，操作人："+name);    }}