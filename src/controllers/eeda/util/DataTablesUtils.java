package controllers.eeda.util;import com.jfinal.core.Controller;import com.jfinal.log.Logger;public class DataTablesUtils {    private static Logger logger = Logger.getLogger(DataTablesUtils.class);    // 这里是data tables默认生成的单一过滤框，可以过滤的字段定义, 字段间是 OR 关系    public static String buildCommonFilter(String[] aColumns, Controller controller) {        String commonFilterWhere = "";        String searchStr = controller.getPara("sSearch");        if (searchStr != null && !"".equals(searchStr)) {            commonFilterWhere = "WHERE (";            for (int i = 0; i < aColumns.length; i++) {                commonFilterWhere += aColumns[i] + " LIKE '%" + searchStr + "%' OR ";            }            commonFilterWhere = commonFilterWhere.substring(0, commonFilterWhere.length() - 3);            commonFilterWhere += ')';        }        logger.debug("firtst filter:" + commonFilterWhere);        return commonFilterWhere;    }    // 这里外面自定义单个字段过滤的字段处理, 字段间是AND 关系    public static String buildSingleFilter(Controller controller) {        String singleFilters = "";        // 这里外面自定义单个字段过滤的字段处理        String colsLength = controller.getPara("iColumns");        String fieldsWhere = "WHERE (";        for (int i = 0; i < Integer.parseInt(colsLength); i++) {            String mDataProp = controller.getPara("mDataProp_" + i);            String searchValue = controller.getPara("sSearch_" + i);            if (searchValue != null && !"".equals(searchValue)) {                fieldsWhere += mDataProp + " like '%" + searchValue + "%' AND ";            }        }        if (fieldsWhere.length() > 8) {            fieldsWhere = fieldsWhere.substring(0, fieldsWhere.length() - 4);            fieldsWhere += ')';        } else {            fieldsWhere = "";        }        String totalWhere = "";        if (singleFilters.length() > 0 && fieldsWhere.length() > 0) {            totalWhere = singleFilters + fieldsWhere.replaceFirst("WHERE", "AND");        }        if (singleFilters.length() > 0 && fieldsWhere.length() == 0) {            totalWhere = singleFilters;        }        if (singleFilters.length() == 0 && fieldsWhere.length() > 0) {            totalWhere = fieldsWhere;        }        logger.debug("single filter:" + totalWhere);        return totalWhere;    }}